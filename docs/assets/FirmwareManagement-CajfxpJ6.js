import{a as F,b as s,o as u,e as b,aF as y,aD as B,K as x,g as r,w as n,u as a,am as D,aG as I,aH as d,aI as m,L as z,h as q,t as v,aJ as L}from"./index-CocEDF_V.js";import{a as p,N as R,b as i}from"./api-BJ_WnTHy.js";import{N as f}from"./Input-BM0vycYN.js";const U={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},H=F({name:"DeleteFilled",render:function(g,o){return u(),s("svg",U,o[0]||(o[0]=[b("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"},null,-1)]))}}),S={class:"p-4"},h={key:0},G=F({__name:"FirmwareManagement",setup(M){const{mutate:g,isPending:o}=y(p.pet.addFirmware),{data:k,isPending:P}=B(p.pet.getFirmwares,{}),{mutate:C,isPending:_}=y(p.pet.removeFirmware),w=x(null),K={name:{required:!0,message:"Please input name",trigger:["input"]},fileName:{required:!0,message:"Please input file name",trigger:["input"]},md5:{required:!0,message:"Please input md5",trigger:"blur"},size:{required:!0,message:"Please input size",trigger:["input","blur"]}},t=x({name:"",md5:"",size:"",fileName:""}),V=async N=>{N.preventDefault(),w?.value?.validate(async e=>{if(!e)await g({fileName:t.value.fileName,md5:t.value.md5,size:t.value.size,name:t.value.name}),t.value.md5="",t.value.size="",t.value.fileName="",t.value.name="";else return console.log("error submit!!"),!1})};return(N,e)=>(u(),s("div",S,[r(a(R),{ref_key:"formRef",ref:w,inline:"",model:t.value,rules:K},{default:n(()=>[r(a(i),{path:"name",label:"Name"},{default:n(()=>[r(a(f),{value:t.value.name,"onUpdate:value":e[0]||(e[0]=l=>t.value.name=l),valueModifiers:{trim:!0},onKeydown:e[1]||(e[1]=d(m(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(a(i),{path:"md5",label:"Md5"},{default:n(()=>[r(a(f),{value:t.value.md5,"onUpdate:value":e[2]||(e[2]=l=>t.value.md5=l),valueModifiers:{trim:!0},onKeydown:e[3]||(e[3]=d(m(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(a(i),{path:"size",label:"Size"},{default:n(()=>[r(a(f),{value:t.value.size,"onUpdate:value":e[4]||(e[4]=l=>t.value.size=l),valueModifiers:{trim:!0},onKeydown:e[5]||(e[5]=d(m(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(a(i),{ref:"rPasswordFormItemRef",first:"",path:"fileName",label:"File Name"},{default:n(()=>[r(a(f),{value:t.value.fileName,"onUpdate:value":e[6]||(e[6]=l=>t.value.fileName=l),valueModifiers:{trim:!0},width:"160",onKeydown:e[7]||(e[7]=d(m(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1},512),r(a(i),null,{default:n(()=>[r(a(z),{type:"primary",loading:a(o),onClick:V},{default:n(()=>e[8]||(e[8]=[q(" Add ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),a(P)?(u(),s("p",h,"Loading....")):(u(!0),s(D,{key:1},I(a(k),l=>(u(),s("div",{key:l._id,class:"mt-2 p-2 border border-gray-300 rounded flex justify-between items-center"},[b("div",null," Name: "+v(l.name)+" - File Name: "+v(l.fileName)+" - Md5: "+v(l.md5)+" - Size: "+v(l.size),1),r(a(z),{text:"",loading:a(_),style:{"font-size":"24px"},onClick:A=>a(C)({id:l._id})},{default:n(()=>[r(a(L),{color:"red"},{default:n(()=>[r(a(H))]),_:1})]),_:2},1032,["loading","onClick"])]))),128))]))}});export{G as default};
